---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "segment_destination_filter Resource - terraform-provider-segment"
subcategory: ""
description: |-
  A destination filter which allows control of how events are flowing to destinations. More information on destination filters and how they are used can be found in the Segment Destination Filters documentation https://segment.com/docs/connections/destinations/destination-filters/.
---

# segment_destination_filter (Resource)

A destination filter which allows control of how events are flowing to destinations. More information on destination filters and how they are used can be found in the [Segment Destination Filters documentation](https://segment.com/docs/connections/destinations/destination-filters/).

## Example Usage

```terraform
# Filter to drop events
resource "segment_destination_filter" "drop_events" {
  destination = "test_destination"
  title       = "Checkout events only"
  description = "Only send checkout events to destination"
  condition   = "event != \"Checkout\"" # Invert condition to drop all events but `Checkout`
  enabled     = true
  actions {
    drop {}
  }
}

#Â Filter to sample data
resource "segment_destination_filter" "sample_events" {
  destination = "test_destination"
  title       = "Users accepting marketing"
  description = "Sends 10% of users accepting marketing permissions"
  condition   = "context.castPermissions.marketing = true"
  enabled     = true
  actions {
    sample {
      percent = 0.1
      path    = "anomnymousId"
    }
  }
}

# Filter to block fields
resource "segment_destination_filter" "checkout_block_ip_postcode" {
  destination = "test_destination"
  title       = "No IP and postcode on Checkout"
  description = "Prevents IP address and postcode being sent on checkout"
  condition   = "event == \"Checkout\""
  enabled     = true
  actions {
    block_fields {
      context    = ["client.ip"]
      properties = ["postcode"]
    }
  }
}

# Filter to allow fields
resource "segment_destination_filter" "checkout_allow_price_product" {
  destination = "test_destination"
  title       = "Checkout price and product only"
  description = "Allows only price and product fields to go through on a Checkout event"
  condition   = "event == \"Checkout\""
  enabled     = true
  actions {
    allow_fields {
      properties = ["price", "product"]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **actions** (Block List, Min: 1, Max: 1) The filtering action to apply to events which match the `condition` above. Available actions are: `drop`, `sample`, `block_fields`, `allow_fields`. (see [below for nested schema](#nestedblock--actions))
- **condition** (String) The condition of the destination filter. This is defined as a FQL statement.
- **description** (String) The description of the destination filter for the Segment UI.
- **destination** (String) The ID of the destination this filter is associated with.
- **enabled** (Boolean) Whether the destination filter is enabled.
- **title** (String) The title of the destination filter for the Segment UI.

### Optional

- **id** (String) The ID of this resource.

### Read-Only

- **name** (String) The name of the destination fitler.

<a id="nestedblock--actions"></a>
### Nested Schema for `actions`

Optional:

- **allow_fields** (Block List, Max: 1) Filter configuration for `block_fields` and `allow_fields` actions. (see [below for nested schema](#nestedblock--actions--allow_fields))
- **block_fields** (Block List, Max: 1) Filter configuration for `block_fields` and `allow_fields` actions. (see [below for nested schema](#nestedblock--actions--block_fields))
- **sample** (Block Set) Allows only a percentage of events through to the destination. (see [below for nested schema](#nestedblock--actions--sample))

Read-Only:

- **drop** (Block List) Drops the event from the destination. (see [below for nested schema](#nestedblock--actions--drop))

<a id="nestedblock--actions--allow_fields"></a>
### Nested Schema for `actions.allow_fields`

Optional:

- **context** (Set of String) A set of properties in the event context to either be allowed or blocked. Nested fields (i.e. dot-separated field names) are not supported.
- **properties** (Set of String) A set of properties in the event body to either be allowed or blocked. Nested fields (i.e. dot-separated field names) are not supported.
- **traits** (Set of String) A set of traits in the event body to either be allowed or blocked.


<a id="nestedblock--actions--block_fields"></a>
### Nested Schema for `actions.block_fields`

Optional:

- **context** (Set of String) A set of properties in the event context to either be allowed or blocked. Nested fields (i.e. dot-separated field names) are not supported.
- **properties** (Set of String) A set of properties in the event body to either be allowed or blocked. Nested fields (i.e. dot-separated field names) are not supported.
- **traits** (Set of String) A set of traits in the event body to either be allowed or blocked.


<a id="nestedblock--actions--sample"></a>
### Nested Schema for `actions.sample`

Required:

- **percent** (Number) The percentage of events to allow.

Optional:

- **path** (String) Events will be sampled based on the value at this path.


<a id="nestedblock--actions--drop"></a>
### Nested Schema for `actions.drop`


